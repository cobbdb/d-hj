!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=function(){throw Error("[BaseClass] Abstract method was called without definition.")}},{}],2:[function(a,b){function c(a){return a.extend=function(b){var c,e={base:a.base};b=b||{};for(c in a)"function"==typeof a[c]&&(e[c]=a[c].bind(a));for(c in b)a[c]="function"==typeof b[c]?d(c,a,e,b):b[c];return a.base=e,a},a.implement=function(){var b,c=arguments.length;for(b=0;c>b;b+=1)arguments[b](a);return a},a}var d=a("./rebind.js");c.Abstract=a("./abstract.js"),c.Stub=a("./stub.js"),c.Interface=a("./interface.js"),b.exports=c},{"./abstract.js":1,"./interface.js":3,"./rebind.js":4,"./stub.js":5}],3:[function(a,b){b.exports=function(a){return function(b){var c;for(c in a)b[c]=a[c];return b}}},{}],4:[function(a,b){b.exports=function(a,b,c,d){return function(){var e,f=b.base;return b.base=c,b.self=d,e=d[a].apply(b,arguments),b.base=f,e}}},{}],5:[function(a,b){b.exports=function(){}},{}],6:[function(a,b){b.exports=a(1)},{"F:\\wamp\\www\\horse-jockey\\node_modules\\baseclassjs\\src\\abstract.js":1}],7:[function(a,b){b.exports=a(2)},{"./abstract.js":6,"./interface.js":8,"./rebind.js":9,"./stub.js":10,"F:\\wamp\\www\\horse-jockey\\node_modules\\baseclassjs\\src\\baseclass.js":2}],8:[function(a,b){b.exports=a(3)},{"F:\\wamp\\www\\horse-jockey\\node_modules\\baseclassjs\\src\\interface.js":3}],9:[function(a,b){b.exports=a(4)},{"F:\\wamp\\www\\horse-jockey\\node_modules\\baseclassjs\\src\\rebind.js":4}],10:[function(a,b){b.exports=a(5)},{"F:\\wamp\\www\\horse-jockey\\node_modules\\baseclassjs\\src\\stub.js":5}],11:[function(a,b){b.exports=function(){var a,b=arguments[0],c=arguments.length;for(a=1;c>a;a+=1)b=b.replace(/%s/,arguments[a]);return b}},{}],12:[function(a,b){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;i>h;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b){{var c=a("./dimension.js"),d=a("./point.js");a("./log.js")}b.exports=function(a){var b,e=0,f=!1,g=a.frames||1,h=a.size||c(),i=a.start||d(),i=d(h.width*i.x,h.height*i.y),j=1;return{size:h,frame:0,speed:a.speed||0,load:function(b){a.sheet.load(b)},start:function(){b=Date.now(),f=!0},pause:function(){f=!1},stop:function(){f=!1,e=0,this.frame=0,j=1},update:function(){var a,c,d;f&&this.speed&&(d=1/this.speed*1e3,a=Date.now(),c=a-b,e+=c,e>=d&&(e=0,this.nextFrame()),b=a)},nextFrame:function(){return this.frame+=j,a.sinusoid?this.frame%(g-1)===0&&(j*=-1):this.frame%=g,this.frame},draw:function(b,d,e,f){var g,j=this.frame*h.width;e=e||c(1,1),f=f||0,g=c(h.width*e.width,h.height*e.height),b.save(),b.translate(d.x+g.width/2,d.y+g.height/2),b.rotate(f),b.drawImage(a.sheet,i.x+j,i.y,h.width,h.height,-g.width/2,-g.height/2,g.width,g.height),b.restore()}}}},{"./dimension.js":23,"./log.js":32,"./point.js":34}],14:[function(a,b){b.exports=function(a){var b=document.createElement("audio"),c=b.play;return b.loop=a.loop||!1,b.volume=a.volume||1,b.play=function(a){a&&(this.currentTime=0),c.call(this)},b.stop=function(){this.pause(),this.currentTime=0},a.on=a.on||{},b.onloadeddata=a.on.load,b.onplay=a.on.play,b.onplaying=a.on.playing,b.onended=a.on.ended,b.src="assets/sound/"+a.src,b}},{}],15:[function(a,b){var c=a("./detect-mobile.js"),d=document.createElement("canvas");c?(d.width=window.innerWidth,d.height=window.innerHeight):("landscape"===localStorage.drago?(d.width=480,d.height=320):(d.width=320,d.height=480),d.style.border="1px solid #000"),document.body.appendChild(d),d.mobile=c,d.ctx=d.getContext("2d"),b.exports=d},{"./detect-mobile.js":22}],16:[function(a,b){{var c=a("./shape.js"),d=a("./vector.js"),e=a("./point.js");a("./dimension.js")}b.exports=function(a,b){return a=a||e(),b=b||0,c({pos:a,name:"circle",intersects:{rectangle:function(a){var b,c=e(this.x,this.y);return this.x>a.right?c.x=a.right:this.x<a.x&&(c.x=a.x),this.y>a.bottom?c.y=a.bottom:this.y<a.y&&(c.y=a.y),b=d(this.x-c.x,this.y-c.y),b.magnitude<this.radius},circle:function(a){var b=d(a.x-this.x,a.y-this.y);return b.magnitude<this.radius+a.radius}}}).extend({radius:b,width:2*b,height:2*b,top:a.y-b,right:a.x+b,bottom:a.y+b,left:a.x-b,draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.stroke()},move:function(a,b){this.x=a,this.y=b,this.top=b-this.radius,this.right=a+this.radius,this.bottom=b+this.radius,this.left=a-this.radius},resize:function(a){this.radius=a,this.width=2*a,this.height=2*a,this.top=this.y-a,this.right=this.x+a,this.bottom=this.y+a,this.left=this.x-a}})}},{"./dimension.js":23,"./point.js":34,"./shape.js":38,"./vector.js":41}],17:[function(a,b){var c=a("baseclassjs"),d=a("./sprite.js");b.exports=function(a){return d(a).extend({load:function(a){a()},start:c.Stub,pause:c.Stub,stop:c.Stub,update:c.Stub,draw:c.Stub})}},{"./sprite.js":39,baseclassjs:7}],18:[function(a,b){var c=a("./id-counter.js"),d=a("./event-handler.js"),e=a("baseclassjs"),f=a("./rectangle.js"),g=a("./point.js");b.exports=function(a){var b={},h={},i=[],j=!1;return a.collisionSets&&(i=[].concat(a.collisionSets)),e({id:c.nextId,name:a.name,mask:a.mask||f(),offset:a.offset||g(),move:function(a){this.mask.move(a.x+this.offset.x,a.y+this.offset.y)},intersects:function(a){return this.mask.intersects(a)},update:function(){var a=this;j||(i.forEach(function(b){b.update(a)}),j=!0)},teardown:function(){j=!1,h={}},addCollision:function(a){b[a]=!0,h[a]=!0},removeCollision:function(a){b[a]=!1},clearCollisions:function(){b={}},isCollidingWith:function(a){return b[a]||!1},canCollideWith:function(a){var b=this.id===a,c=h[a];return!b&&!c}}).implement(d({events:a.on,singles:a.one}))}},{"./event-handler.js":25,"./id-counter.js":29,"./point.js":34,"./rectangle.js":36,baseclassjs:7}],19:[function(a,b){var c=a("./rectangle.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./canvas.js");b.exports=function(a){var b,g,h=[],i=[],j=a.gridSize||e(1,1);for(b=0;b<j.width;b+=1)for(g=0;g<j.height;g+=1)h.push(c(d(b/j.width*f.width,g/j.height*f.height),e(f.width/j.width,f.height/j.height)));for(b=0;b<h.length;b+=1)i.push([]);return{name:a.name,draw:function(a,b){b&&h.forEach(function(b){b.draw(a)}),i.forEach(function(b){b.forEach(function(b){b.mask.draw(a)})})},clearCollisions:function(){var a,b=i.length;for(a=0;b>a;a+=1)i[a]=[]},update:function(a){var b,c=i.length;for(b=0;c>b;b+=1)a.intersects(h[b])&&i[b].push(a)},handleCollisions:function(){var a,b,c=i.length;for(a=0;c>a;a+=1)b=i[a],b.forEach(function(a){b.forEach(function(b){var c,d,e=a.canCollideWith(b.id);e&&(c=a.intersects(b.mask),d=a.isCollidingWith(b.id),c?(a.addCollision(b.id),d||a.trigger("collide/"+b.name,b),a.trigger("colliding/"+b.name,b)):(d&&(a.removeCollision(b.id),a.trigger("separate/"+b.name,b)),a.trigger("miss/"+b.name,b)))})})},teardown:function(){this.clearCollisions()}}}},{"./canvas.js":15,"./dimension.js":23,"./point.js":34,"./rectangle.js":36}],20:[function(a,b){b.exports={Shape:a("./shape.js"),Circle:a("./circle.js"),Rectangle:a("./rectangle.js"),Dimension:a("./dimension.js"),Point:a("./point.js"),Vector:a("./vector.js"),Polar:a("./polar.js"),FrameCounter:a("./frame-counter.js"),IdCounter:a("./id-counter.js"),Mouse:a("./mouse.js"),Keyboard:a("./keyboard.js"),EventHandler:a("./event-handler.js"),SpriteSheet:a("./spritesheet.js"),AnimationStrip:a("./animation-strip.js"),Audio:a("./audio.js"),Font:a("./font.js"),CollisionHandler:a("./collision-handler.js"),collisions:a("./dragon-collisions.js"),Game:a("./game.js"),canvas:a("./canvas.js"),Screen:a("./screen.js"),Collidable:a("./collidable.js"),Sprite:a("./sprite.js"),ClearSprite:a("./clear-sprite.js")}},{"./animation-strip.js":13,"./audio.js":14,"./canvas.js":15,"./circle.js":16,"./clear-sprite.js":17,"./collidable.js":18,"./collision-handler.js":19,"./dimension.js":23,"./dragon-collisions.js":24,"./event-handler.js":25,"./font.js":26,"./frame-counter.js":27,"./game.js":28,"./id-counter.js":29,"./keyboard.js":31,"./mouse.js":33,"./point.js":34,"./polar.js":35,"./rectangle.js":36,"./screen.js":37,"./shape.js":38,"./sprite.js":39,"./spritesheet.js":40,"./vector.js":41}],21:[function(a,b){b.exports={show:{fps:function(){}}}},{}],22:[function(a,b){b.exports="ontouchstart"in window},{}],23:[function(a,b){function c(a,b){return{width:a||0,height:b||0,clone:function(){return c(this.width,this.height)},equals:function(a){return this.width===a.width&&this.height===a.height},scale:function(a){return c(this.width*a,this.height*a)}}}b.exports=c},{}],24:[function(a,b){var c=a("./collision-handler.js"),d=a("./dimension.js");b.exports=c({name:"dragon",gridSize:d(4,4)})},{"./collision-handler.js":19,"./dimension.js":23}],25:[function(a,b){var c=a("baseclassjs");b.exports=function(a){var b,d={},e={};a=a||{};for(b in a.events)d[b]=[a.events[b]];for(b in a.singles)e[b]=[a.singles[b]];return c.Interface({on:function(a,b){d[a]=d[a]||[],d[a].push(b)},one:function(a,b){e[a]=e[a]||[],e[a].push(b)},off:function(a){d[a]=[],e[a]=[]},trigger:function(a,b){var c=this;a in d&&d[a].forEach(function(a){a.call(c,b)}),a in e&&(e[a].forEach(function(a){a.call(c,b)}),e[a]=[])}})}},{baseclassjs:7}],26:[function(a,b){var c=a("curb"),d="@font-face{font-family:'%s';font-style:%s;font-weight:%s;src:url(assets/fonts/%s);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215,U+E0FF,U+EFFD,U+F000}",e={};b.exports={load:function(a){var b;e[a.name]||(b=document.createElement("style"),b.innerHTML=c(d,a.name,a.style||"normal",a.weight||"400",a.src),document.body.appendChild(b),e[a.name]=!0)}}},{curb:11}],27:[function(a,b){var c=frameCountThisSecond=frameRate=0,d=Date.now();b.exports={countFrame:function(){var a=Date.now(),b=a-d;frameCountThisSecond+=1,d=a,c+=b,c>=1e3&&(c-=1e3,frameRate=frameCountThisSecond,frameCountThisSecond=0)},get frameRate(){return frameRate},draw:function(a){a.font="30px Verdana",a.fillStyle="rgba(250, 50, 50, 0.5)",a.fillText(frameRate,20,50)}}},{}],28:[function(a,b){var c=(a("./collision-handler.js"),a("./point.js")),d=a("./dimension.js"),e=a("./circle.js"),f=a("./rectangle.js"),g=a("./collidable.js"),h=a("./frame-counter.js"),i=a("./mouse.js"),j=a("./canvas.js"),k=j.ctx,l=a("./id-counter.js"),m=(a("./log.js"),a("./dragon-collisions.js")),n=!1,o=[],p={},q=[],r=!1,s={},t=!1,u={screentap:g({name:"screentap",mask:e(c(),8)}),screendrag:g({name:"screendrag",mask:e(c(),8)}),screenhold:g({name:"screenhold",mask:e(c(),8)}),screenedge:{top:g({name:"screenedge/top",mask:f(c(0,-9),d(j.width,10))}),right:g({name:"screenedge/right",mask:f(c(j.width-1,0),d(10,j.height))}),bottom:g({name:"screenedge/bottom",mask:f(c(0,j.height-1),d(j.width,10))}),left:g({name:"screenedge/left",mask:f(c(-9,0),d(10,j.height))})}};i.on.down(function(){u.screentap.move(i.offset),m.update(u.screentap)}),b.exports={debug:a("./debug-console.js"),screen:function(a){return p[a]},addScreens:function(a){var b;a&&(a=[].concat(a),b=l.nextId,s[b]=a.length,a.forEach(function(c){c.load(function(){s[b]-=1,0===s[b]&&(q=q.concat(a))})}))},removeScreen:function(a){a.removed=!0,r=!0},run:function(a){var b=this,c=function(){b.update(),b.draw(),b.teardown(),h.countFrame(),t&&window.requestAnimationFrame(c)};n=a,a&&(window.Dragon=this),t||(t=!0,window.requestAnimationFrame(c))},kill:function(){t=!1,o.forEach(function(a){a.stop()})},update:function(){i.is.dragging?(u.screendrag.move(i.offset),m.update(u.screendrag)):i.is.holding&&(u.screenhold.move(i.offset),m.update(u.screenhold)),m.update(u.screenedge.top),m.update(u.screenedge.right),m.update(u.screenedge.bottom),m.update(u.screenedge.left),o.forEach(function(a){a.update()}),m.handleCollisions(),q.length&&(q.forEach(function(a){o.push(a),a.name&&(p[a.name]=a),a.trigger("ready")}),o.sort(function(a,b){return b.depth-a.depth}),q=[])},draw:function(){o.forEach(function(a){a.draw(k,n)}),n&&(h.draw(k),m.draw(k))},teardown:function(){m.teardown(),o.forEach(function(a){a.teardown()}),r&&(o=o.filter(function(a){return!a.removed}),r=!1)}}},{"./canvas.js":15,"./circle.js":16,"./collidable.js":18,"./collision-handler.js":19,"./debug-console.js":21,"./dimension.js":23,"./dragon-collisions.js":24,"./frame-counter.js":27,"./id-counter.js":29,"./log.js":32,"./mouse.js":33,"./point.js":34,"./rectangle.js":36}],29:[function(a,b){var c=0;b.exports={get lastId(){return c},get nextId(){return c+=1}}},{}],30:[function(a,b){b.exports=function(a){var b=new Image;return b.ready=!1,b.cmd=[],b.processLoadEvents=function(){this.cmd.forEach(function(a){a(b)}),this.cmd=[]},b.onload=function(){this.ready=!0,this.processLoadEvents()},b.load=function(c){c=c||function(){},this.ready?c(b):(this.cmd.push(c),this.src="assets/img/"+a)},b}},{}],31:[function(a,b){function c(a){return a.charCode||a.keyCode||a.which}var d={alt:!1,ctrl:!1,shift:!1},e={};document.onkeydown=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!0,d[f]=!0,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},document.onkeyup=function(a){var b=c(a),f=String.fromCharCode(b);e[b]=!1,d[f]=!1,d.alt=a.altKey,d.ctrl=a.ctrlKey,d.shift=a.shiftKey},b.exports={get alt(){return d.alt},get ctrl(){return d.ctrl},get shift(){return d.shift},arrow:{get left(){return e[37]||!1},get up(){return e[38]||!1},get right(){return e[39]||!1},get down(){return e[40]||!1}},name:function(a){return d[a]||!1},code:function(a){return e[a]||!1}}},{}],32:[function(a,b){var c=a("lumberjackjs");b.exports=c()},{lumberjackjs:12}],33:[function(a,b){(function(c){function d(a){return j.mobile?h(a.touches[0].clientX,a.touches[0].clientY):h(a.offsetX,a.offsetY)}var e,f,g,h=a("./point.js"),i=a("./vector.js"),j=a("./canvas.js"),k=!1,l=!1,m=!1,n=h(),o=h(),p=i();j.mobile?(e="touchstart",f="touchmove",g="touchend"):(e="mousedown",f="mousemove",g="mouseup"),j.addEventListener(e,function(a){k=!0,n=d(a),c.setTimeout(function(){k&&(m=!0)},200)}),document.addEventListener(g,function(){k=l=m=!1}),j.addEventListener(f,function(a){o=n,n=d(a),k&&(p.x=n.x-o.x,p.y=n.y-o.y,p.magnitude>1&&(l=!0))}),b.exports={is:{get down(){return k},get dragging(){return l},get holding(){return m}},get offset(){return n},on:{down:function(a){j.addEventListener(e,a)},click:function(){},dclick:function(){},up:function(a){document.addEventListener(g,a)},move:function(a){j.addEventListener(f,a)}},eventName:{start:e,move:f,end:g}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./canvas.js":15,"./point.js":34,"./vector.js":41}],34:[function(a,b){function c(a,b){return{x:a||0,y:b||0,clone:function(){return c(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y}}}b.exports=c},{}],35:[function(a,b){function c(a,b,c,d){var e=a.magnitude===d*b.magnitude,f=(a.theta%Math.PI).toFixed(5),g=((b.theta+c)%Math.PI).toFixed(5);return e&&f===g}function d(a,b){return{theta:a||0,magnitude:b||0,invert:function(){return d(this.theta+Math.PI,-1*this.magnitude)},clone:function(){return d(this.theta,this.magnitude)},toVector:function(){return e(this.magnitude*Math.cos(this.theta),this.magnitude*Math.sin(this.theta))},equals:function(a){return c(this,a,0,1)||c(this,a,Math.PI,-1)}}}var e=a("./vector.js");b.exports=d},{"./vector.js":41}],36:[function(a,b){var c=a("./shape.js"),d=a("./point.js"),e=a("./dimension.js"),f=a("./vector.js");b.exports=function(a,b){return a=a||d(),b=b||e(),c({pos:a,name:"rectangle",intersects:{rectangle:function(a){return this.x<a.right&&this.right>a.x&&this.y<a.bottom&&this.bottom>a.y},circle:function(a){var b,c=d(a.x,a.y);return a.x>this.right?c.x=this.right:a.x<this.x&&(c.x=this.x),a.y>this.bottom?c.y=this.bottom:a.y<this.y&&(c.y=this.y),b=f(a.x-c.x,a.y-c.y),b.magnitude<a.radius}}}).extend({width:b.width||0,height:b.height||0,top:a.y||0,right:a.x+b.width||0,bottom:a.y+b.height||0,left:a.x||0,move:function(a,b){this.x=a,this.y=b,this.top=b,this.right=a+this.width,this.bottom=b+this.height,this.left=a},resize:function(a){this.width=a.width,this.height=a.height,this.right=this.x+a.width,this.bottom=this.y+a.height},draw:function(a){a.beginPath(),a.lineWidth=1,a.strokeStyle="rgba(250, 50, 50, 0.5)",a.rect(this.x,this.y,this.width,this.height),a.stroke()}})}},{"./dimension.js":23,"./point.js":34,"./shape.js":38,"./vector.js":41}],37:[function(a,b){var c=a("baseclassjs"),d=a("./event-handler.js"),e=a("./id-counter.js");b.exports=function(a){function b(){i.length&&(i.forEach(function(a){g.push(a),a.name&&(h[a.name]=a),a.trigger("ready")}),g.sort(function(a,b){return b.depth-a.depth}),i=[])}var f=!1,g=[],h={},i=[],j={},k=!1,l={},m=!1,n=!1;return c({name:a.name,load:function(b){f||(this.addCollisionSets(a.collisionSets),this.addSprites({set:a.spriteSet,onload:b,force:!0}),f=!0)},start:function(){m=!0,n=!0,this.trigger("start")},pause:function(){m=!1,n=!0,this.trigger("pause")},stop:function(){m=!1,n=!1,this.trigger("stop")},depth:a.depth||0,collision:function(a){return l[a]},addCollisionSets:function(a){a&&(a=[].concat(a),a.forEach(function(a){l[a.name]=a}))},sprite:function(a){return h[a]},addSprites:function(a){var c,d,f;a=a||{},d=a.onload||function(){},f=[].concat(a.set),a.set.length?(c=e.nextId,j[c]=f.length,f.forEach(function(e){e.load(function(){j[c]-=1,0===j[c]&&(i=i.concat(f),a.force&&b(),d())})})):d()},removeSprite:function(a){a.removed=!0,k=!0},update:function(){var a;if(m){g.forEach(function(a){m&&!a.removed&&a.update()});for(a in l)l[a].handleCollisions()}b()},draw:function(a,b){var c;if(n&&(g.forEach(function(b){b.draw(a)}),b))for(c in l)l[c].draw(a)},teardown:function(){var a;m&&g.forEach(function(a){a.removed||a.teardown()});for(a in l)l[a].teardown();k&&(g=g.filter(function(a){return!a.removed}),k=!1)}}).implement(d({events:a.on,singles:a.one}))}},{"./event-handler.js":25,"./id-counter.js":29,baseclassjs:7}],38:[function(a,b){var c=a("baseclassjs"),d=a("./point.js");b.exports=function(a){var b,e;return a=a||{},e=a.intersects||{},b=a.pos||d(),c({x:b.x,y:b.y,name:a.name,move:c.Abstract,resize:c.Abstract,intersects:function(a){return e[a.name].call(this,a)},draw:c.Stub})}},{"./point.js":34,baseclassjs:7}],39:[function(a,b){var c=(a("baseclassjs"),a("./collidable.js")),d=a("./point.js"),e=a("./dimension.js"),f=a("./rectangle.js");b.exports=function(a){var b=!1,g=a.strips||{},h=a.pos||d(),i=!1,j=!1;return a.freemask||(a.mask=a.mask||f(),a.offset=d(a.mask.x,a.mask.y),a.mask.move(h.x+a.offset.x,h.x+a.offset.y)),a.one=a.one||{},a.one.ready=a.one.ready||function(){this.start()},c(a).extend({strip:g[a.startingStrip],useStrip:function(a){this.strip!==g[a]&&(this.strip.stop(),this.strip=g[a],this.strip.start())},getStrip:function(a){return g[a]},pos:h,scale:a.scale||1,size:a.size||(g[a.startingStrip]||{}).size,trueSize:function(){return this.size.scale(this.scale)},rotation:a.rotation||0,depth:a.depth||0,speed:a.speed||d(),start:function(){i=!0,j=!0,this.strip.start(),this.trigger("start")},pause:function(){i=!1,j=!0,this.strip.pause(),this.trigger("pause")},stop:function(){i=!1,j=!1,this.strip.stop(),this.trigger("stop")},update:function(){i&&(this.shift(),this.strip.update(),this.base.update())},draw:function(a){var b;j&&(b=this.strip.size,this.strip.draw(a,this.pos,e(this.scale*this.size.width/b.width,this.scale*this.size.height/b.height),this.rotation))},load:function(a){var c,d;if(!b){d=Object.keys(g).length;for(c in g)g[c].load(function(){d-=1,0===d&&(a(),b=!0)})}},move:function(b,c){this.pos.x=b,this.pos.y=c,a.freemask||this.base.move(this.pos)},shift:function(b,c){this.pos.x+=b||this.speed.x,this.pos.y+=c||this.speed.y,a.freemask||this.base.move(this.pos)}})}},{"./collidable.js":18,"./dimension.js":23,"./point.js":34,"./rectangle.js":36,baseclassjs:7}],40:[function(a,b){var c=a("./image.js"),d={};b.exports=function(a){var b,e=a.src;return e in d?b=d[e]:(b=c(e),d[e]=b),b}},{"./image.js":30}],41:[function(a,b){function c(a,b){return{x:a||0,y:b||0,get magnitude(){return Math.abs(Math.sqrt(this.y*this.y+this.x*this.x))},clone:function(){return c(this.x,this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},scale:function(a){return c(this.x*a,this.y*a)},toPolar:function(){return d(Math.atan(this.y/this.x),this.magnitude)}}}var d=a("./polar.js");b.exports=c},{"./polar.js":35}],42:[function(a,b){var c=a("dragonjs");b.exports=c.CollisionHandler({name:"racetrack",gridSize:c.Dimension(5,5)})},{dragonjs:20}],43:[function(a){var b=a("dragonjs"),c=a("./screens/tracks/riverton.js");b.Font.load({name:"Wonder",src:"8-bit-wonder.ttf"}),b.Game.addScreens([a("./screens/training.js"),a("./screens/shop.js"),c]),b.Game.currentTrack=c,b.Game.loadTrack=function(a){this.currentTrack.stop(),this.currentTrack=a,this.currentTrack.start()},b.Game.run(!0)},{"./screens/shop.js":49,"./screens/tracks/riverton.js":51,"./screens/training.js":52,dragonjs:20}],44:[function(a,b){function c(a){return a=a||{},{speed:a.speed||1,jump:a.jump||1,strength:a.strength||1,smarts:a.smarts||1,health:a.health||1,clone:function(){return c(this)}}}b.exports=c},{}],45:[function(a,b){b.exports={none:function(){},flu:function(a){a.speed*=.8,a.jump*=.8,a.strength*=.8},thrush:function(a){a.speed*=.2},tetanus:function(){},rainRot:function(){},swampFever:function(){}}},{}],46:[function(a,b){function c(a){return a=a||{},{size:a.size||1,temper:a.temper||1,smarts:a.smarts||1,clone:function(){return c(this)}}}b.exports=c},{}],47:[function(a,b){b.exports={next:{get horse(){return"clydesdale"},get jockey(){return"jimmy"}}}},{}],48:[function(a,b){var c=a("./sprites/horse.js"),d=a("./sprites/jockey.js");b.exports={money:100,horse:c(),jockey:d()}},{"./sprites/horse.js":64,"./sprites/jockey.js":65}],49:[function(a,b){var c=a("dragonjs");b.exports=c.Screen({name:"shop",spriteSet:[a("../sprites/close-shop.js")],depth:-1})},{"../sprites/close-shop.js":63,dragonjs:20}],50:[function(a,b){var c=a("dragonjs"),d=a("../player.js"),e=a("../util.js");b.exports=function(b){var f,g=b.horses.concat(d.horse),h=e.range(g.length);for(e.shuffle(h),f=0;f<g.length;f+=1)g[f].pos.y=45*h[f]+40;return c.Screen({name:"racetrack",collisionSets:[a("../collisions/racetrack.js")],spriteSet:[].concat(g)}).extend({horses:g,race:function(){g.forEach(function(a){a.race()})}})}},{"../collisions/racetrack.js":42,"../player.js":48,"../util.js":67,dragonjs:20}],51:[function(a,b){{var c=a("../track.js"),d=a("../../sprites/horse.js");a("../../player.js")}b.exports=c({horses:[d()]})},{"../../player.js":48,"../../sprites/horse.js":64,"../track.js":50}],52:[function(a,b){{var c=a("dragonjs"),d=(a("../player.js"),a("../sprites/buttons/race.js")),e={horse:[a("../sprites/buttons/train-speed.js"),a("../sprites/buttons/train-strength.js"),a("../sprites/buttons/train-jump.js"),a("../sprites/buttons/train-smarts.js")],jockey:[a("../sprites/buttons/train-jsmarts.js"),a("../sprites/buttons/train-size.js"),a("../sprites/buttons/train-temper.js")]};[].concat(e.horse).concat(e.jockey)}b.exports=c.Screen({name:"training",spriteSet:[a("../sprites/buttons/open-shop.js"),a("../sprites/stats.js"),d],one:{ready:function(){this.start()}},depth:0}).extend({draw:function(a){var b=a.createRadialGradient(c.canvas.width*(1-d.width)/2,.05*c.canvas.height,.1*c.canvas.width,c.canvas.width*(1-d.width)/2,.05*c.canvas.height,c.canvas.width);b.addColorStop(0,"#dfd3c8"),b.addColorStop(1,"#bf7140"),a.fillStyle=b,a.fillRect(0,0,c.canvas.width*(1-d.width),c.canvas.height),this.base.draw(a)}})},{"../player.js":48,"../sprites/buttons/open-shop.js":53,"../sprites/buttons/race.js":54,"../sprites/buttons/train-jsmarts.js":55,"../sprites/buttons/train-jump.js":56,"../sprites/buttons/train-size.js":57,"../sprites/buttons/train-smarts.js":58,"../sprites/buttons/train-speed.js":59,"../sprites/buttons/train-strength.js":60,"../sprites/buttons/train-temper.js":61,"../sprites/stats.js":66,dragonjs:20}],53:[function(a,b){var c=a("dragonjs"),d=a("./race.js"),e=a("../close-shop.js"),f={top:.25},g=c.Dimension(.3*c.canvas.width,c.canvas.height*(e.margin.top-f.top));b.exports=c.Sprite({name:"shop-button",collisionSets:[c.collisions],mask:c.Rectangle(c.Point(),g),strips:{up:c.AnimationStrip({sheet:c.SpriteSheet({src:"buttons/shop.png"}),size:c.Dimension(128,64)})},startingStrip:"up",pos:c.Point((c.canvas.width-d.size.width)/2-g.width/2,c.canvas.height*f.top),size:g,on:{"colliding/screentap":function(){c.Game.screen("training").pause(),c.Game.screen("shop").start()}}})},{"../close-shop.js":63,"./race.js":54,dragonjs:20}],54:[function(a,b){var c=a("dragonjs"),d=.18;b.exports=c.Sprite({name:"race",collisionSets:[c.collisions],mask:c.Rectangle(c.Point(),c.Dimension(c.canvas.width*d,c.canvas.height)),strips:{race:c.AnimationStrip({sheet:c.SpriteSheet({src:"start-race.png"}),size:c.Dimension(88,31)})},startingStrip:"race",pos:c.Point(c.canvas.width*(1-d),0),size:c.Dimension(c.canvas.width*d,c.canvas.height),on:{"colliding/screentap":function(){console.log(".. and they're off!")}}}).extend({width:d})},{dragonjs:20}],55:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+JBRN",src:"buttons/smarts.png",pos:c.Point(c.canvas.width/2,c.canvas.height/2-c.canvas.height/3)}).extend({click:function(){e.jockey.coreStats.smarts+=1,e.jockey.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],56:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+JMP",src:"buttons/jump.png",pos:c.Point(9*c.canvas.width/100,c.canvas.height/2-c.canvas.height/6)}).extend({click:function(){e.horse.coreStats.jump+=1,e.horse.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],57:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+SZE",src:"buttons/size.png",pos:c.Point(c.canvas.width/2,c.canvas.height/2+c.canvas.height/3)}).extend({click:function(){e.jockey.coreStats.size+=1,e.jockey.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],58:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+BRN",src:"buttons/smarts.png",pos:c.Point(9*c.canvas.width/100,c.canvas.height/2+c.canvas.height/6)}).extend({click:function(){e.horse.coreStats.smarts+=1,e.horse.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],59:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+SPD",src:"buttons/speed.png",pos:c.Point(27*c.canvas.width/100,c.canvas.height/2-c.canvas.height/3)}).extend({click:function(){e.horse.coreStats.speed+=1,e.horse.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],60:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+STR",src:"buttons/strength.png",pos:c.Point(27*c.canvas.width/100,c.canvas.height/2+c.canvas.height/3)}).extend({click:function(){e.horse.coreStats.strength+=1,e.horse.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],61:[function(a,b){var c=a("dragonjs"),d=a("./train.js"),e=a("../../player.js");b.exports=d({title:"+TPR",src:"buttons/temper.png",pos:c.Point(31*c.canvas.width/50,c.canvas.height/2)}).extend({click:function(){e.jockey.coreStats.temper+=1,e.jockey.refreshStats()}})},{"../../player.js":48,"./train.js":62,dragonjs:20}],62:[function(a,b){var c=a("dragonjs"),d=a("baseclassjs");b.exports=function(a){return c.Sprite({name:a.name||a.title,collisionSets:[c.collisions],mask:c.Circle(a.pos,40),freemask:!0,strips:{up:c.AnimationStrip({sheet:c.SpriteSheet({src:a.src}),size:c.Dimension(256,64)})},startingStrip:"up",size:c.Dimension(128,32),pos:c.Point(a.pos.x-64,a.pos.y-16),on:{"colliding/screentap":function(){this.click()}}}).extend({title:a.title,click:d.Abstract})}},{baseclassjs:2,dragonjs:20}],63:[function(a,b){var c=a("dragonjs"),d=a("./buttons/race.js"),e={side:.1,bottom:.05,top:.38},f=c.Rectangle(c.Point(c.canvas.width*e.side,c.canvas.height*e.top),c.Dimension(c.canvas.width*(1-(d.width+2*e.side)),c.canvas.height*(1-(e.top+e.bottom))));b.exports=c.ClearSprite({name:"close-shop",collisionSets:[c.collisions],mask:c.Rectangle(c.Point(),c.canvas),pos:f,size:f,freemask:!0,on:{"colliding/screentap":function(a){a.intersects(f)||(c.Game.screen("shop").stop(),c.Game.screen("training").start())}}}).extend({margin:e,update:function(){c.collisions.update(this)},draw:function(a){a.fillStyle="rgba(68, 68, 68, 0.6)",a.fillRect(0,0,c.canvas.width,c.canvas.height),a.fillStyle="#fafafa",a.fillRect(this.pos.x,this.pos.y,this.size.width,this.size.height),f.draw(a)}})},{"./buttons/race.js":54,dragonjs:20}],64:[function(a,b){var c=a("dragonjs"),d=a("../namer.js"),e=a("../illness.js"),f=a("../horse-stats.js");b.exports=function(b){return b=b||{},c.Sprite({name:"horse",collisionSets:[a("../collisions/racetrack.js"),c.collisions],mask:c.Rectangle(c.Point(),c.Dimension(50,37)),strips:{horse:c.AnimationStrip({sheet:c.SpriteSheet({src:"horse.png"}),size:c.Dimension(50,37)})},startingStrip:"horse",on:{"collide/screenedge/right":function(){this.speed.x=0}}}).extend({showname:b.showname||d.next.horse,coreStats:b.stats||f(),adjStats:f(),refreshStats:function(a){var b=this.coreStats.clone();a=a||function(){},a(b),this.sickness(b),this.adjStats=b},sickness:e.none,race:function(){this.refreshStats(),this.speed.x=this.adjStats.speed}})}},{"../collisions/racetrack.js":42,"../horse-stats.js":44,"../illness.js":45,"../namer.js":47,dragonjs:20}],65:[function(a,b){var c=a("dragonjs"),d=a("../namer.js"),e=a("../jockey-stats.js");b.exports=function(a){return a=a||{},c.Sprite({name:"jockey",strips:{jockey:c.AnimationStrip({sheet:c.SpriteSheet({src:"jockey.png"}),size:c.Dimension(64,64)})},startingStrip:"jockey",pos:c.Point(100,100),depth:2}).extend({showname:a.showname||d.next.jockey,coreStats:a.stats||e(),adjStats:e(),refreshStats:function(a){var b=this.coreStats.clone();a=a||function(){},a(b),this.adjStats=b}})}},{"../jockey-stats.js":46,"../namer.js":47,dragonjs:20}],66:[function(a,b){var c=a("dragonjs"),d=(a("baseclassjs"),a("../player.js")),e={horse:{speed:c.Point(.29*c.canvas.width,c.canvas.height/2-.15*c.canvas.height),jump:c.Point(.18*c.canvas.width,c.canvas.height/2-.06*c.canvas.height),smarts:c.Point(.18*c.canvas.width,c.canvas.height/2+.06*c.canvas.height),strength:c.Point(.29*c.canvas.width,c.canvas.height/2+.15*c.canvas.height)},jockey:{smarts:c.Point(.435*c.canvas.width,c.canvas.height/2-.14*c.canvas.height),temper:c.Point(.505*c.canvas.width,c.canvas.height/2),size:c.Point(.435*c.canvas.width,c.canvas.height/2+.14*c.canvas.height)}};b.exports=c.ClearSprite({name:"stats",depth:2}).extend({draw:function(a){var b,c;
a.font="16px Wonder",a.textBaseline="middle",a.textAlign="center",a.fillStyle="black";for(b in e.horse)c=e.horse[b],a.fillText(d.horse.coreStats[b],c.x,c.y);for(b in e.jockey)c=e.jockey[b],a.fillText(d.jockey.coreStats[b],c.x,c.y)}})},{"../player.js":48,baseclassjs:2,dragonjs:20}],67:[function(a,b){b.exports={shuffle:function(a){var b,c,d;for(b=0;b<a.length;b+=1)c=parseInt(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return a},range:function(a,b){var c,d,e=[];for(b||(b=a,a=0),d=b-a,c=0;d>c;c+=1)e.push(c+a);return e}}},{}]},{},[43,44,45,46,47,48,67]);